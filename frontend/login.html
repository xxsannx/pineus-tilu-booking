<!doctype html>
<html lang="id">
<head><meta charset="utf-8"><title>Login | Pineus Tilu</title></head>
<body>
  <h2>Login ke Pineus Tilu</h2>
  <form id="f">
    <input name="email" type="email" placeholder="Email" required><br>
    <input name="password" type="password" placeholder="Password" required><br>
    <button type="submit">Login</button>
  </form>
  <div id="m" style="color:red;"></div>
  <p>Belum punya akun? <a href="register.html">Daftar</a></p>
<script>
const f=document.getElementById('f'),m=document.getElementById('m');
f.onsubmit=async e=>{
  e.preventDefault();
  const data=Object.fromEntries(new FormData(f));
  try{
    const res=await fetch('http://localhost:3000/api/login',{
      method:'POST',headers:{'Content-Type':'application/json'},credentials:'include',body:JSON.stringify(data)
    });
    const j=await res.json();
    if(j.success){m.style.color='green';m.textContent=j.message;setTimeout(()=>location='dashboard.html',1000);}
    else m.textContent=j.error;
  }catch{m.textContent='Server tidak dapat dihubungi';}
};
</script>
</body>
</html>
